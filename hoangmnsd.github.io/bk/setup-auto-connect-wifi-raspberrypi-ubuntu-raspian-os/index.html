<!DOCTYPE html>
<html lang='en' dir='auto'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Ban đầu mình muốn connect wifi cho RPi thì phải flash OS vào thẻ microSD, cắm bàn phím, màn hình, rồi cắm dây nguồn. Sau đó vào sửa 1 số file config để connect wifi. Điều này khiến mình thấy loằng ngoằng và tốn thời gian.  '>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='Raspberry Pi: Setup auto connect wifi at first boots for Ubuntu OS, Raspian OS • hoangmnsd'>
<meta property='og:description' content='Ban đầu mình muốn connect wifi cho RPi thì phải flash OS vào thẻ microSD, cắm bàn phím, màn hình, rồi cắm dây nguồn. Sau đó vào sửa 1 số file config để connect wifi. Điều này khiến mình thấy loằng ngoằng và tốn thời gian.  '>
<meta property='og:url' content='https://hoangmnsd.github.io/bk/setup-auto-connect-wifi-raspberrypi-ubuntu-raspian-os/'>
<meta property='og:site_name' content='Hoang'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/7a4fb984a45dfe1129362728655c0b75?s=256'><meta property='article:section' content='bk'><meta property='article:published_time' content='2022-03-26T23:42:35&#43;07:00'/><meta property='article:modified_time' content='2022-03-26T23:42:35&#43;07:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.85.0" />

  <title>Raspberry Pi: Setup auto connect wifi at first boots for Ubuntu OS, Raspian OS • hoangmnsd</title>
  <link rel='canonical' href='https://hoangmnsd.github.io/bk/setup-auto-connect-wifi-raspberrypi-ubuntu-raspian-os/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.ab98e12b.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#ffcd00;}
</style>

  

</head>
<body class='page type-bk has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/'>
        <img src='/images/logo.png'>
      </a>
    </div>
    
    <h2 class='title site-title '>
      <a href='/'>
      Hoang
      </a>
    </h2>
    <div class='desc'>
    Learn something new everyday 😋
    </div>
  </header>

</section>
<section class='widget widget-search sep-after'>
  <header>
    <h4 class='title widget-title'>Search</h4>
  </header>

  <form action='/search' id='search-form' class='search-form'>
    <label>
      <span class='screen-reader-text'>Search</span>
      <input id='search-term' class='search-term' type='search' name='q' placeholder='Search&hellip;'>
    </label></form>

</section>
<section class='widget widget-sidebar_menu sep-after'><nav id='sidebar-menu' class='menu sidebar-menu' aria-label='Sidebar Menu'>
    <div class='container'>
      <ul><li class='item'>
  <a href='/'>Home</a></li><li class='item'>
  <a href='/posts/'>Posts</a></li></ul>
    </div>
  </nav>

</section><section class='widget widget-taxonomy_cloud sep-after'>
  <header>
    <h4 class='title widget-title'>Tags</h4>
  </header>

  <div class='container list-container'>
  <ul class='list taxonomy-cloud'><li>
        <a href='/tags/aci/' style='font-size:1.0625em'>ACI</a>
      </li><li>
        <a href='/tags/ajax/' style='font-size:1em'>Ajax</a>
      </li><li>
        <a href='/tags/aks/' style='font-size:1em'>AKS</a>
      </li><li>
        <a href='/tags/ansible/' style='font-size:1.1875em'>Ansible</a>
      </li><li>
        <a href='/tags/apigateway/' style='font-size:1.0625em'>APIGateway</a>
      </li><li>
        <a href='/tags/argocd/' style='font-size:1em'>Argocd</a>
      </li><li>
        <a href='/tags/aws/' style='font-size:1.75em'>AWS</a>
      </li><li>
        <a href='/tags/azure/' style='font-size:1.6875em'>Azure</a>
      </li><li>
        <a href='/tags/bayes/' style='font-size:1em'>Bayes</a>
      </li><li>
        <a href='/tags/blog/' style='font-size:1.125em'>Blog</a>
      </li><li>
        <a href='/tags/cert-manager/' style='font-size:1em'>Cert-manager</a>
      </li><li>
        <a href='/tags/chatgpt/' style='font-size:1em'>ChatGPT</a>
      </li><li>
        <a href='/tags/ci/cd/' style='font-size:1.1875em'>CI/CD</a>
      </li><li>
        <a href='/tags/circleci/' style='font-size:1em'>CircleCI</a>
      </li><li>
        <a href='/tags/cnab/' style='font-size:1em'>CNAB</a>
      </li><li>
        <a href='/tags/cognito/' style='font-size:1.0625em'>Cognito</a>
      </li><li>
        <a href='/tags/discord/slack/' style='font-size:1em'>Discord/Slack</a>
      </li><li>
        <a href='/tags/docker/' style='font-size:1.125em'>Docker</a>
      </li><li>
        <a href='/tags/docker-compose/' style='font-size:1.0625em'>Docker-compose</a>
      </li><li>
        <a href='/tags/efk/' style='font-size:1.0625em'>EFK</a>
      </li><li>
        <a href='/tags/eks/' style='font-size:1em'>EKS</a>
      </li><li>
        <a href='/tags/eksctl/' style='font-size:1.0625em'>eksctl</a>
      </li><li>
        <a href='/tags/elasticsearch/' style='font-size:1.0625em'>ElasticSearch</a>
      </li><li>
        <a href='/tags/externaldns/' style='font-size:1em'>ExternalDNS</a>
      </li><li>
        <a href='/tags/fluentd/' style='font-size:1.0625em'>Fluentd</a>
      </li><li>
        <a href='/tags/flux/' style='font-size:1em'>Flux</a>
      </li><li>
        <a href='/tags/football/' style='font-size:1em'>Football</a>
      </li><li>
        <a href='/tags/gatsbyjs/' style='font-size:1.125em'>GatsbyJS</a>
      </li><li>
        <a href='/tags/gcp/' style='font-size:1.0625em'>GCP</a>
      </li><li>
        <a href='/tags/geography/' style='font-size:1em'>Geography</a>
      </li><li>
        <a href='/tags/git/' style='font-size:1.0625em'>Git</a>
      </li><li>
        <a href='/tags/github/' style='font-size:1em'>Github</a>
      </li><li>
        <a href='/tags/gitlab/' style='font-size:1.25em'>Gitlab</a>
      </li><li>
        <a href='/tags/gke/' style='font-size:1.125em'>GKE</a>
      </li><li>
        <a href='/tags/helm/' style='font-size:1em'>Helm</a>
      </li><li>
        <a href='/tags/homeassistant/' style='font-size:1.4375em'>HomeAssistant</a>
      </li><li>
        <a href='/tags/hugo/' style='font-size:1em'>Hugo</a>
      </li><li>
        <a href='/tags/iot/' style='font-size:1em'>IoT</a>
      </li><li>
        <a href='/tags/iptables/' style='font-size:1em'>Iptables</a>
      </li><li>
        <a href='/tags/jquery/' style='font-size:1em'>Jquery</a>
      </li><li>
        <a href='/tags/js/' style='font-size:1em'>Js</a>
      </li><li>
        <a href='/tags/keel/' style='font-size:1em'>Keel</a>
      </li><li>
        <a href='/tags/kibana/' style='font-size:1.0625em'>Kibana</a>
      </li><li>
        <a href='/tags/kubectl/' style='font-size:1em'>kubectl</a>
      </li><li>
        <a href='/tags/kubernetes/' style='font-size:2em'>Kubernetes</a>
      </li><li>
        <a href='/tags/lambda/' style='font-size:1.1875em'>Lambda</a>
      </li><li>
        <a href='/tags/letsecrypt/' style='font-size:1em'>Letsecrypt</a>
      </li><li>
        <a href='/tags/letsencrypt/' style='font-size:1em'>Letsencrypt</a>
      </li><li>
        <a href='/tags/locust/' style='font-size:1em'>Locust</a>
      </li><li>
        <a href='/tags/nginx/' style='font-size:1.0625em'>Nginx</a>
      </li><li>
        <a href='/tags/notes/' style='font-size:1.9375em'>Notes</a>
      </li><li>
        <a href='/tags/openldap/' style='font-size:1em'>OpenLDAP</a>
      </li><li>
        <a href='/tags/openssl/' style='font-size:1em'>OpenSSL</a>
      </li><li>
        <a href='/tags/oraclecloud/' style='font-size:1.0625em'>OracleCloud</a>
      </li><li>
        <a href='/tags/packer/' style='font-size:1em'>Packer</a>
      </li><li>
        <a href='/tags/postgresql/' style='font-size:1em'>Postgresql</a>
      </li><li>
        <a href='/tags/proxy/' style='font-size:1em'>Proxy</a>
      </li><li>
        <a href='/tags/python/' style='font-size:1.25em'>Python</a>
      </li><li>
        <a href='/tags/raspberrypi/' style='font-size:1.1875em'>RaspberryPi</a>
      </li><li>
        <a href='/tags/reactjs/' style='font-size:1em'>ReactJS</a>
      </li><li>
        <a href='/tags/selenium/' style='font-size:1em'>Selenium</a>
      </li><li>
        <a href='/tags/sonarqube/' style='font-size:1em'>Sonarqube</a>
      </li><li>
        <a href='/tags/synapse/' style='font-size:1.0625em'>Synapse</a>
      </li><li>
        <a href='/tags/telegram/' style='font-size:1.0625em'>Telegram</a>
      </li><li>
        <a href='/tags/test/' style='font-size:1em'>Test</a>
      </li><li>
        <a href='/tags/ubuntu/' style='font-size:1.0625em'>Ubuntu</a>
      </li><li>
        <a href='/tags/windows/' style='font-size:1.0625em'>Windows</a>
      </li><li>
        <a href='/tags/wsl/' style='font-size:1em'>WSL</a>
      </li></ul>
</div>


</section>
</div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><line x1="3" y1="12" x2="21" y2="12" />
<line x1="3" y1="6" x2="21" y2="6" />
<line x1="3" y1="18" x2="21" y2="18" />
</svg>
</span>
  <span class='close'><svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><line x1="18" y1="6" x2="6" y2="18" />
<line x1="6" y1="6" x2="18" y2="18" />
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/'>Home</a>
      </li><li class='item'>
        <a href='/posts/'>Posts</a>
      </li><li class='item'>
        <a href='/about/'>About</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'>
    
    <style>.widget-breadcrumbs li:after{content:'\2f '}</style>
  <section class='widget widget-breadcrumbs sep-after'>
    <nav id='breadcrumbs'>
      <ol><li><a href='/'>Home</a></li><li><a href='/bk/'>Bks</a></li><li><span>Raspberry Pi: Setup auto connect wifi at first boots for Ubuntu OS, Raspian OS</span></li></ol>
    </nav>
  </section></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Hoang</p><p class='desc site-desc'>Learn something new everyday 😋</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Raspberry Pi: Setup auto connect wifi at first boots for Ubuntu OS, Raspian OS</h1>
      
<p class='desc'>Ban đầu mình muốn connect wifi cho RPi thì phải flash OS vào thẻ microSD, cắm bàn phím, màn hình, rồi cắm dây nguồn. Sau đó vào sửa 1 số file config để connect wifi. Điều này khiến mình thấy loằng ngoằng và tốn thời gian.  </p>


    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
<line x1="16" y1="2" x2="16" y2="6" />
<line x1="8" y1="2" x2="8" y2="6" />
<line x1="3" y1="10" x2="21" y2="10" />
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2022-03-26T23:42:35&#43;07:00'>2022, Mar 26</time>
</span>

  <span class='byline'><svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><path d="M21,21V20c0-2.76-4-5-9-5s-9,2.24-9,5v1" />
<path d="M16,6.37A4,4,0,1,1,12.63,3,4,4,0,0,1,16,6.37Z" />
</svg>
<span class='screen-reader-text'> by </span><a href='/authors/hoangmnsd'>hoangmnsd</a></span>
  
<span class='reading-time'><svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><circle cx="12" cy="12" r="10" />
<polyline points="12 6 12 12 15 15" />
</svg>
5 mins read
</span>


</div>


  </div>
</header>

  
  
<details class='container entry-toc'>
  <summary class='title'>
    <span>Table of Contents</span>
  </summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#vấn-đề">Vấn đề</a></li>
    <li><a href="#mục-tiêu">Mục tiêu</a></li>
    <li><a href="#cách-làm">Cách làm</a>
      <ul>
        <li><a href="#1-ubuntu-server-os-2004-lts-no-desktop-environment">1. Ubuntu Server OS 20.04 LTS (no desktop environment)</a>
          <ul>
            <li><a href="#11-format-microsd-by-raspberry-pi-imager-version--171">1.1. Format microSd by Raspberry Pi Imager version &gt;= 1.7.1</a></li>
            <li><a href="#12-select-os">1.2. Select OS</a></li>
            <li><a href="#13-config-advanced-options">1.3. Config Advanced options</a></li>
            <li><a href="#14-process">1.4. Process</a></li>
            <li><a href="#15-re-insert-microsd-to-laptop">1.5. Re-insert microSD to Laptop</a></li>
            <li><a href="#16-edit-user-data-file">1.6. Edit <code>user-data</code> file</a></li>
            <li><a href="#17-setup-rpi">1.7. Setup RPi</a></li>
            <li><a href="#18-ssh-to-rpi">1.8. SSH to RPi</a></li>
            <li><a href="#19-chú-ý">1.9. Chú ý</a></li>
          </ul>
        </li>
        <li><a href="#2-raspian-os-no-desktop-environment">2. Raspian OS (no desktop environment)</a>
          <ul>
            <li><a href="#21-initial-setup">2.1. Initial setup</a></li>
            <li><a href="#22-setup-static-ip">2.2. Setup static IP</a></li>
            <li><a href="#chú-ý">Chú ý</a></li>
          </ul>
        </li>
        <li><a href="#bonus">Bonus</a></li>
      </ul>
    </li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
</details>


  <div class='container entry-content'>
  <p>Mày mò vọc vạch về Raspberry Pi 4B/8GB 1 chút.</p>
<h1 id="vấn-đề">Vấn đề</h1>
<p>Ban đầu mình muốn connect wifi cho RPi thì phải flash OS vào thẻ microSD, cắm bàn phím, màn hình, rồi cắm dây nguồn.<br>
Sau đó vào sửa 1 số file config để connect wifi. Điều này khiến mình thấy loằng ngoằng và tốn thời gian.</p>
<h1 id="mục-tiêu">Mục tiêu</h1>
<p>Với nhu cầu bản thân chỉ cần remote từ laptop SSH vào RPi (via Putty), ko cần RPi có desktop. Thế nên mình muốn mỗi khi mình flash OS vào thẻ microSD, thẻ SD đó sẽ config hết mọi thứ sẵn. Mình chỉ cần cắm nguồn vào RPi, sau đó là mình có thể từ laptop SSH vào RPi được luôn (via Putty).</p>
<h1 id="cách-làm">Cách làm</h1>
<h2 id="1-ubuntu-server-os-2004-lts-no-desktop-environment">1. Ubuntu Server OS 20.04 LTS (no desktop environment)</h2>
<p>Việc setup cho connect wifi trên Raspian OS thì có lẽ đã có nhiều bài viết trên mạng rồi, nhưng dành cho Ubuntu OS thì cũng có nhưng mình làm theo thì hầu như không thành công.</p>
<p>Mình viết bài này để note lại các steps cần làm và chú ý trong quá trình setup.</p>
<h3 id="11-format-microsd-by-raspberry-pi-imager-version--171">1.1. Format microSd by Raspberry Pi Imager version &gt;= 1.7.1</h3>
<p>link download: <a href="https://www.raspberrypi.com/software/">https://www.raspberrypi.com/software/</a></p>
<p>Chuẩn bị 1 thẻ nhớ microSD, cắm vào Laptop.</p>
<p>Dùng chức năng ERASE để format thẻ nhớ sang fat32 trước:<br>
<img src="https://raw.githubusercontent.com/hoangmnsd/images-bucket/master/static/images/rpi-imager-ease.jpg" alt=""></p>
<h3 id="12-select-os">1.2. Select OS</h3>
<p>Sau khi format xong, quay lại chọn OS Ubuntu Server 20.04 LTS, 64 bit.<br>
<img src="https://raw.githubusercontent.com/hoangmnsd/images-bucket/master/static/images/rpi-imager-os-ubuntu-server-20.04.jpg" alt=""></p>
<h3 id="13-config-advanced-options">1.3. Config Advanced options</h3>
<p>Chọn Advanced Option, set hostname, enable SSH, set ssh public key (để cho secure thì nên disable chức năng authen via password), configure WIFI, password wifi, wifi country&hellip;<br>
<img src="https://raw.githubusercontent.com/hoangmnsd/images-bucket/master/static/images/rpi-imager-os-ubuntu-advanced-config1.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/hoangmnsd/images-bucket/master/static/images/rpi-imager-os-ubuntu-advanced-config2.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/hoangmnsd/images-bucket/master/static/images/rpi-imager-os-ubuntu-advanced-config3.jpg" alt=""></p>
<h3 id="14-process">1.4. Process</h3>
<p>Click button <code>Write</code> để tiến hành Flash OS vào thẻ microSD</p>
<h3 id="15-re-insert-microsd-to-laptop">1.5. Re-insert microSD to Laptop</h3>
<p>Sau khi RP Imager done, tháo thẻ microSD ra. Cắm lại vào laptop.</p>
<h3 id="16-edit-user-data-file">1.6. Edit <code>user-data</code> file</h3>
<p>Tìm đến directory của microSD: <code>system-boot</code>.Bạn sẽ tìm 2 file sau: <code>user-data</code>, và <code>network-config</code></p>
<p>2 file được generated bởi nhưng thông tin mà bạn đã input vào Raspberry Pi Imager ở step 3</p>
<p>Nội dung file <code>network-config</code> sẽ tương tự như này:</p>
<pre><code>version: 2
wifis:
  renderer: networkd
  wlan0:
    dhcp4: true
    optional: true
    access-points:
      &quot;okThisIsMyWifi&quot;:
        password: &quot;ced8123jka92312j332kj4b1j4b4jk14hbg3a6181234nkjn&quot;
</code></pre><p>-&gt; bạn ko cần phải sửa gì file <code>network-config</code> này. Password của bạn đã được mã hóa.</p>
<p>Nội dung file <code>user-data</code> sẽ tương tự như này:</p>
<pre><code>#cloud-config
hostname: ubuntu-rpi
manage_etc_hosts: true
packages:
- avahi-daemon
apt:
  conf: |
    Acquire {
      Check-Date &quot;false&quot;;
    };

users:
- name: ubuntu
  groups: users,adm,dialout,audio,netdev,video,plugdev,cdrom,games,input,gpio,spi,i2c,render,sudo
  shell: /bin/bash
  lock_passwd: true
  ssh_authorized_keys:
    - ssh-rsa AAAABkjasbjkfkjdnvlvnjkdncsdn+w3Y0g24ieofnodfcndlkcfnmefjewnfd/ldmfjkwldsmvkvnwdlvn+pakovnweojfnwefojwefnjkenfdoeD9=
  sudo: ALL=(ALL) NOPASSWD:ALL


runcmd:
- sed -i 's/^s*REGDOMAIN=S*/REGDOMAIN=VN/' /etc/default/crda || true
</code></pre><p>-&gt; bạn cần sửa file <code>user-data</code> này, add thêm dòng sau:</p>
<pre><code>....
runcmd:
- sed -i 's/^s*REGDOMAIN=S*/REGDOMAIN=VN/' /etc/default/crda || true
- netplan apply

# Reboot after cloud-init completes
power_state:
  mode: reboot

</code></pre><p>Như bạn thấy, mình add thêm command <code>netplan apply</code>
và phần <code>reboot</code> để RPi của mình sẽ reboot ở step cuối cùng.</p>
<p>Vậy là xong phần chuẩn bị cho thẻ microSD. Eject nó ra khỏi Laptop, giờ bạn có thể cắm nó vào RPi rồi.</p>
<h3 id="17-setup-rpi">1.7. Setup RPi</h3>
<p>Cắm thẻ nhớ microSD vào RPi, cắm HDMI (cái này tùy bạn, nhưng cắm HDMI thì bạn sẽ theo dõi được quá trình bootstrap của OS, nếu ko theo dõi thì bạn chờ 3-4 phút rồi quay lại)</p>
<p>Cắm dây nguồn vào RPi.</p>
<p>Màn hình của RPi mà hiện như này nghĩa là đã xong:<br>
<img src="https://raw.githubusercontent.com/hoangmnsd/images-bucket/master/static/images/rpi-ubuntu-os-cloudinit-done.jpg" alt=""></p>
<h3 id="18-ssh-to-rpi">1.8. SSH to RPi</h3>
<p>Giờ bạn chỉ cần tìm xem ip của RPi là gì, rồi dùng Putty SSH vào thôi. Thường thì để check ip của RPi mình vào 192.168.1.1 để đăng nhập vào giao diện của modem internet.</p>
<h3 id="19-chú-ý">1.9. Chú ý</h3>
<ul>
<li>Ngoài ra, nếu bạn ko muốn dùng wifi, mới đầu Ethernet bị disable (ko có đèn xanh), phải run command sau: &ldquo;sudo dhclient -v&rdquo;. Thì sẽ thấy cổng Ethernet sáng đèn xanh. Bạn có thể add command đó vào file user-data để nó enable Ethernet ngay từ đầu</li>
</ul>
<h2 id="2-raspian-os-no-desktop-environment">2. Raspian OS (no desktop environment)</h2>
<h3 id="21-initial-setup">2.1. Initial setup</h3>
<p>Với OS này thì đơn giản hơn vì tài liệu trên mạng rất đầy đủ</p>
<ul>
<li>Sau khi flash image Raspian OS without desktop vào microSD, tháo ra insert lại vào Laptop</li>
<li>Tạo 2 file sau: <code>SSH</code> và <code>wpa_supplicant.conf</code> trong root directory của microSD</li>
<li>File <code>SSH</code> ko có content</li>
<li>File <code>wpa_supplicant.conf</code> có content như sau:</li>
</ul>
<pre><code>country=vn
update_config=1
ctrl_interface=/var/run/wpa_supplicant

network={
 scan_ssid=1
 ssid=&quot;okThisIsMyWifi&quot;
 psk=&quot;12345678&quot;
}
</code></pre><ul>
<li>Cắm microSD vào RPi, tìm IP của nó, rồi SSH bằng Putty vào với user mặc định: <code>pi</code>, pass: <code>raspberry</code>. SSH dc rồi thì đổi pass đi nhé.</li>
</ul>
<h3 id="22-setup-static-ip">2.2. Setup static IP</h3>
<p>Bình thường mỗi khi mất mạng, stop/start RPi khả năng RPi sẽ bị thay đổi internal IP</p>
<p>Bạn muốn cố định IP của RPi là <code>192.168.1.200</code> mỗi khi như vậy cần SSH vào RPi rồi sửa ở đây <code>/etc/dhcpcd.conf</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">...
<span style="color:#75715e"># Example static IP configuration:</span>
...

<span style="color:#75715e"># Hoang: set static IP BEGIN</span>
 <span style="color:#75715e"># setting for ethernet (WIFI)</span>
interface eth0
static ip_address<span style="color:#f92672">=</span>192.168.1.200/24
static routers<span style="color:#f92672">=</span>192.168.1.1
static domain_name_servers<span style="color:#f92672">=</span>192.168.1.1 8.8.8.8
 <span style="color:#75715e"># setting for wired (LAN)</span>
interface wlan0
static ip_address<span style="color:#f92672">=</span>192.168.1.200/24
static routers<span style="color:#f92672">=</span>192.168.1.1
static domain_name_servers<span style="color:#f92672">=</span>192.168.1.1 8.8.8.8
<span style="color:#75715e"># Hoang: END</span>
...
</code></pre></div><p>chú ý có phần sửa:<br>
<code>eth0</code> là config khi dùng mạng WIFI (Ethernet ko dây)<br>
<code>wlan0</code>là config khi dùng mạng dây (Wired)<br>
<code>static routers=</code> là config IP của Router nhà bạn (thường là <code>192.168.1.1</code>)</p>
<p>Giờ reboot RPi để apply thay đổi:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo reboot
</code></pre></div><p>Done, SSH to <code>192.168.1.200</code> to check again!</p>
<h3 id="chú-ý">Chú ý</h3>
<p>Trong trường hợp bạn cần remote (dùng VNC) vào desktop của RPi chạy Raspian OS with desptop environment:</p>
<ul>
<li>Nên enable SSH trước</li>
<li>Dùng Putty SSH vào rPi, run command <code>vncserver</code> để enable VNC server</li>
<li>Sẽ nhìn thấy output của command trên kiểu:</li>
</ul>
<pre><code>New desktop is raspberrypi:1 (192.168.1.4:1)  
</code></pre><ul>
<li>Tải và cài đặt trên laptop phần mềm: VNC viewer</li>
<li>Dùng VNC connect vào ip: 192.168.1.4:1</li>
</ul>
<h2 id="bonus">Bonus</h2>
<p>Không nên rút dây nguồn của RPi đột ngột, mà nên shutdown OS trước:<br>
Command to shutdown safely via SSH, Raspian OS:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo shutdown -h now
sudo shutdown -h <span style="color:#ae81ff">2</span>

<span style="color:#75715e"># Reboot:</span>
sudo shutdown -r now
</code></pre></div><p>Check model of RPi on Raspian OS:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">pi@raspberrypi:~ $ cat /proc/cpuinfo | grep Model
</code></pre></div><h1 id="references">References</h1>
<p><a href="https://sergejskozlovics.medium.com/how-to-set-up-a-wireless-ubuntu-server-on-raspberry-pi-89b84dca34d2">https://sergejskozlovics.medium.com/how-to-set-up-a-wireless-ubuntu-server-on-raspberry-pi-89b84dca34d2</a><br>
<a href="https://forums.raspberrypi.com/viewtopic.php?t=258832">https://forums.raspberrypi.com/viewtopic.php?t=258832</a><br>
<a href="https://raspberrypi.vn/thiet-lap-dia-chi-ip-tinh-cho-raspberry-147.pi">https://raspberrypi.vn/thiet-lap-dia-chi-ip-tinh-cho-raspberry-147.pi</a></p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/bk/encrypt-azure-copy-snapshot-to-storage-account/'>
        <span aria-hidden='true'><svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><line x1="20" y1="12" x2="4" y2="12" />
<polyline points="10 18 4 12 10 6" />
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Azure: Copy Snapshot to Storage Account</a>
    </div><div class='next-entry sep-before'>
      <a href='/bk/encrypt-simple-demo-data-transfer-between-raspberry-and-aws-iotcore/'>
        <span class='screen-reader-text'>Next post: </span>Simple Demo: Data transfer between Raspberry Pi and AWS IoT Core<span aria-hidden='true'>Next <svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><line x1="4" y1="12" x2="20" y2="12" />
<polyline points="14 6 20 12 14 18" />
</svg>
</span>
      </a>
    </div></div>
</nav>


<section id='comments' class='comments'>
  <div class='container sep-before'>
    <div class='comments-area'><div id='submission-success' class='comment-submission-feedback'>
  <h4>Thank You!</h4>
  <span>Your comment has been submitted. It will appear on this page shortly!</span>
  <a href='#comments' class='button'>OK</a>
</div>

<div id='submission-failure' class='comment-submission-feedback'>
  <h4>Yikes, Sorry!</h4>
  <span>Error occured. Couldn&#39;t submit your comment. Please try again. Thank You!</span>
  <a href='#comments' class='button'>OK</a>
</div>




<div id='respond' class='comment-respond'>
  <h4 class='comment-reply-title'>Leave a comment<small>
      <a rel='nofollow' id='cancel-comment-reply-link' href='#respond' class='button' style='display:none' aria-label='Cancel comment'>Cancel</a>
    </small>
  </h4>
  <form action='http://132.145.71.114:8121/v2/entry/hoangmnsd/hoangmnsd/master/comments' method='post' id='comment-form' class='comment-form'>
    <input type='hidden' name='options[postId]' value='252600a6e128cef6b4e2a550cc6939d5'>
    <input type='hidden' name='options[redirect]' value='https://hoangmnsd.github.io/bk/setup-auto-connect-wifi-raspberrypi-ubuntu-raspian-os/#submission-success'>
    <input type='hidden' name='options[redirectError]' value='https://hoangmnsd.github.io/bk/setup-auto-connect-wifi-raspberrypi-ubuntu-raspian-os/#submission-failure'>

    <input type='address' name='fields[honeypot]' style='display:none'>
    <input type='hidden' name='fields[permalink]' value='/bk/setup-auto-connect-wifi-raspberrypi-ubuntu-raspian-os/'>
    <input type='hidden' name='fields[parent_id]' value=''><input type='hidden' name='options[reCaptcha][siteKey]' value='6LfVBkIbAAAAAMtm5T8t2odg9MK_V4QmMH8igQf3'>
      <input type='hidden' name='options[reCaptcha][secret]' value='voMPlsRRZcYpYg8FtEjNp61ZsDHFwt8sPUCm7t9p/gZ4OPlXwrdglRdZo1FcOAbY77CTjARHyyYYJSGiAFE1mQdmZDGz9Cnj9yhBzCpmfx0N/lzTlwxI/cACLS/ySlYYmhb6Rp7SuR7kIWpZN/XGuWzJFJCJ4jmtEbhRlkXubbupTDPbQ4e//H1Pv4rRQ7O65Bf/177T15v869Y59txPSgSwtGebU13WDNUxFEPw0xIuyeje6/1ioYU&#43;iZD/5jRQMYJNDgBC4v&#43;954PRzfOipLTYlVg2ncOa0WK&#43;OKxr4PybFtKRRTsPjSNHMdch9pBu5QECf5WG826pRH54r9/N0Q=='><div>
      <label for='comment'>Comment*</label>
      <textarea id='comment' name='fields[content]' required rows='3'></textarea>
    </div>
    <div>
      <label for='name'>Name*</label>
      <input id='name' name='fields[author]' type='text' required>
    </div>
    <div>
      <label for='email'>Email*</label>
      <input id='email' name='fields[email]' type='email' required>
    </div>
    <div>
      <label for='url'>Website</label>
      <input id='url' name='fields[site]' type='url'>
    </div><div class='g-recaptcha' data-sitekey='6LfVBkIbAAAAAMtm5T8t2odg9MK_V4QmMH8igQf3' data-callback="enableSubmitComment"></div>

      <script type="text/javascript">
        function enableSubmitComment(){
          document.getElementById("submitComment").disabled = false;
        }
      </script>

      <script async src='https://www.google.com/recaptcha/api.js'></script><div>
      <button type='submit' id="submitComment" disabled>Comment!</button>
    </div>
  </form>
</div>

</div>
  </div>
</section>

      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/hoangmnsd' target='_blank' rel='noopener me'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" />
</svg>
</a>
      </li><li>
        <a href='mailto:hoangmnsd@gmail.com' target='_blank' rel='noopener me'>
          <span class='screen-reader-text'>Contact via Email</span><svg
  class="icon"
  xmlns="http://www.w3.org/2000/svg"
  viewbox="0 0 24 24"
  stroke-linecap="round"
  stroke-linejoin="round"
  stroke-width="2"
  aria-hidden="true"
><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
<polyline points="22,6 12,13 2,6" />
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2019-2023 hoangmsnd </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.c3bcf2df.js'></script><script src='/js/custom.js'></script>

</body>

</html>

