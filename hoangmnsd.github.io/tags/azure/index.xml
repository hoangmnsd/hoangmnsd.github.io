<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Azure on Hoang</title>
    <link>https://hoangmnsd.github.io/tags/azure/</link>
    <description>Recent content in Azure on Hoang</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Tue, 14 Mar 2023 22:58:56 +0700</lastBuildDate><atom:link href="https://hoangmnsd.github.io/tags/azure/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Troubleshoot Azure Linux VM: Internet &amp; SSH Connections</title>
      <link>https://hoangmnsd.github.io/posts/encrypt-troubleshoot-azure-linux-vm-internet-ssh-connections/</link>
      <pubDate>Tue, 14 Mar 2023 22:58:56 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/encrypt-troubleshoot-azure-linux-vm-internet-ssh-connections/</guid>
      <description>1. Story Mới đây mình gặp 1 tình huống là tạo 1 VM (Ubuntu18.04-LTS) trên Azure cho Dev sử dụng, có toàn quyền sudo luôn.
Dev setup nhiều phần mềm, và sau 1 thời gian thì VM bị lỗi ko thể SSH vào được nữa.
ssh: port 22: Connection timed out Nói chung là sử dụng hàng Cloud thì xử lý những case kiểu này có tài liệu khá đầy đủ, vì Azure là 1 đơn vị cung cấp Cloud lớn.</description>
    </item>
    
    <item>
      <title>When your VM failed to reach Internet and story about Azure Load Balancer</title>
      <link>https://hoangmnsd.github.io/posts/encrypt-when-your-vm-cannot-reach-internet-and-stry-abt-load-balancer/</link>
      <pubDate>Wed, 07 Sep 2022 15:17:42 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/encrypt-when-your-vm-cannot-reach-internet-and-stry-abt-load-balancer/</guid>
      <description>1. Story Đây là note để xử lý khi bạn thấy Server của bạn có vẻ như ko thể kết nối internet được
Có thể bạn sẽ nhìn thấy thông báo này ngay khi ssh vào server:
Failed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check you Internet connection or proxy setting Hoặc khi bạn run 1 vài command đơn giản như sudo apt update, màn hình sẽ dừng lại ở 0% và cuối cùng báo lỗi:</description>
    </item>
    
    <item>
      <title>Azure Synapse: Analyze data with serverless SQL and visualize it on PowerBI</title>
      <link>https://hoangmnsd.github.io/posts/encrypt-azure-synapse-basic-data-flow-analyze-visualize-on-powerbi/</link>
      <pubDate>Fri, 24 Jun 2022 23:36:48 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/encrypt-azure-synapse-basic-data-flow-analyze-visualize-on-powerbi/</guid>
      <description>This post is about a demo using Azure Synapse Analytics. Analyze data with serverless SQL, then visualize on Power BI desktop
Overview about Azure Synapse Analytics Azure Synapse contains the same Data Integration engine and experiences as Azure Data Factory, allowing you to create rich at-scale ETL pipelines without leaving Azure Synapse Analytics.
 Ingest data from 90+ data sources Code-Free ETL with Data flow activities Orchestrate notebooks, Spark jobs, stored procedures, SQL scripts, and more  Synapse SQL: is the ability to do T-SQL based analytics in Synapse workspace.</description>
    </item>
    
    <item>
      <title>Azure ACI notes</title>
      <link>https://hoangmnsd.github.io/posts/encrypt-azure-aci-notes/</link>
      <pubDate>Fri, 29 Apr 2022 00:07:17 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/encrypt-azure-aci-notes/</guid>
      <description>1. Gán Role cho Identity = ARM Bạn có 1 ACI container, đã enable System assigned identity
Bạn muốn gán Role READER cho identity trên bằng ARM Quan trọng là bạn phải biết cách lấy dc principalId của cái System assigned identity.
Ví dụ sau:
// add Role to SystemAssigned identity of ACI { &amp;#34;type&amp;#34;: &amp;#34;Microsoft.Authorization/roleAssignments&amp;#34;, &amp;#34;apiVersion&amp;#34;: &amp;#34;2018-09-01-preview&amp;#34;, &amp;#34;name&amp;#34;: &amp;#34;[variables(&amp;#39;aciRoleDefinitionName&amp;#39;)]&amp;#34;, &amp;#34;dependsOn&amp;#34;: [ &amp;#34;[variables(&amp;#39;aciContainerGroupName&amp;#39;)]&amp;#34; ], &amp;#34;properties&amp;#34;: { &amp;#34;roleDefinitionId&amp;#34;: &amp;#34;[variables(&amp;#39;aciRoleDefinitionId&amp;#39;)]&amp;#34;, &amp;#34;principalId&amp;#34;: &amp;#34;[reference(resourceId(&amp;#39;Microsoft.ContainerInstance/containerGroups&amp;#39;, variables(&amp;#39;aciContainerGroupName&amp;#39;)), &amp;#39;2021-09-01&amp;#39;, &amp;#39;Full&amp;#39;).</description>
    </item>
    
    <item>
      <title>Azure Synapse ARM Template Output properties</title>
      <link>https://hoangmnsd.github.io/posts/azure-notes-synapse-arm-template-output/</link>
      <pubDate>Sat, 23 Apr 2022 20:59:05 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/azure-notes-synapse-arm-template-output/</guid>
      <description>Vấn đề Khi các bạn tạo Azure Synapse bằng ARM template. Bạn muốn output ra Workspace name, SQL endpoint, Synapse Studio URL,&amp;hellip; nhưng ko biết làm sao?
Hiện tượng Có thể bạn sẽ gặp lỗi này:
{&amp;quot;status&amp;quot;:&amp;quot;Failed&amp;quot;,&amp;quot;error&amp;quot;:{&amp;quot;code&amp;quot;:&amp;quot;DeploymentOutputEvaluationFailed&amp;quot;,&amp;quot;message&amp;quot;:&amp;quot;Unable to evaluate template outputs: &#39;synapseWorkspaceName&#39;. Please see error details and deployment operations. Please see https://aka.ms/arm-debug for usage details.&amp;quot;,&amp;quot;details&amp;quot;:[{&amp;quot;code&amp;quot;:&amp;quot;DeploymentOutputEvaluationFailed&amp;quot;,&amp;quot;target&amp;quot;:&amp;quot;synapseWorkspaceName&amp;quot;,&amp;quot;message&amp;quot;:&amp;quot;The template output &#39;synapseWorkspaceName&#39; is not valid: The language expression property &#39;name&#39; doesn&#39;t exist, available properties are &#39;apiVersion, location, tags, identity, properties, condition, existing, isConditionTrue, subscriptionId, resourceGroupName, scope, resourceId, referenceApiVersion, isTemplateResource, isAction, provisioningOperation&#39;.</description>
    </item>
    
    <item>
      <title>Azure: Copy Snapshot to Storage Account</title>
      <link>https://hoangmnsd.github.io/posts/encrypt-azure-copy-snapshot-to-storage-account/</link>
      <pubDate>Fri, 14 Jan 2022 18:03:03 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/encrypt-azure-copy-snapshot-to-storage-account/</guid>
      <description>Trong quá trình config cài cắm, có thể bạn sẽ muốn tạo snapshot/đóng image cho 1 VM nào đó. Sau này bạn chỉ cần tạo lại VM từ snapshot đó là xong.
Azure có tính năng Capture - create an image, nhưng Nếu capture bạn sẽ phải stop VM, và sẽ ko thể sử dụng VM được nữa. (quá trình Capture đòi hỏi generalise VM và xóa các thông tin về user)</description>
    </item>
    
    <item>
      <title>GitOps: Playaround with ArgoCD and private Gitlab CI, ACR</title>
      <link>https://hoangmnsd.github.io/posts/encrypt-playaround-w-argocd-and-private-gitlab-ci-acr/</link>
      <pubDate>Mon, 01 Nov 2021 21:16:47 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/encrypt-playaround-w-argocd-and-private-gitlab-ci-acr/</guid>
      <description>1. Intro Demo about ArgoCD with private Gitlab CI repository, private ACR 2. Prerequisites  Basic knowledge about Azure, ssh-keygen, K8S, Gitlab, Docker commands Workspace: run commands on Azure Cloudshell Prepare an AKS cluster (Standard_DS2_v2, kubernetes version 1.21.2) Prepare an ACR (Azure container registry) with credential  export ACR_SERVER=&amp;#34;YOUR_ACR_NAME.azurecr.io&amp;#34; export ACR_USER=&amp;#34;YOUR_ACR_USER_NAME&amp;#34; export ACR_PASSWORD=&amp;#34;YOUR_ACR_PASSWORD&amp;#34; Clone 2 projects to your workspace:
 https://gitlab.com/argocd-demo2801/gitops-chart https://gitlab.com/argocd-demo2801/webapp  3. Setup 3.1. Config on Webapp repository https://gitlab.</description>
    </item>
    
    <item>
      <title>Azure: How to change private IP of VM, Vnet, Subnet, Load balancer</title>
      <link>https://hoangmnsd.github.io/posts/azure-update-private-ip-vnet-subnet-vm-loadbalancer/</link>
      <pubDate>Sat, 30 Oct 2021 15:24:42 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/azure-update-private-ip-vnet-subnet-vm-loadbalancer/</guid>
      <description>You cannot move a VM from a Vnet/subnet to different Vnet/subnet without re-creating the VM. But in some specific cases, you may not have to move VM to another Vnet/subnet, it will be easier when you just change the private IP of Vnet/subnet/VM/Load balancer&amp;hellip;
Background Assume that you&amp;rsquo;re having a Virtual machine with private IP is: 10.20.1.8 and you want to change it to: 10.25.2.9.
See this picture:
Note that this article is not about moving VM to a different Vnet/Subnet.</description>
    </item>
    
    <item>
      <title>Azure: Request Access Token to Digital Twins use User-Assigned Identity</title>
      <link>https://hoangmnsd.github.io/posts/azure-request-accesstoken-to-digital-twins-managed-identity/</link>
      <pubDate>Fri, 15 Oct 2021 20:57:39 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/azure-request-accesstoken-to-digital-twins-managed-identity/</guid>
      <description>Giống như IAM Role cho EC2 trên AWS, thì trên Azure cũng có feature tương tự đó là Managed identity (System assgined identity hoặc User assigned identity)
Prerequisites Bạn đã tạo User-Assgined identity, VM đã enable identity.
Story Theo Azure official document, ví dụ để lấy access token dùng Azure Resource manager thì từ trong VM cần run command như này:
response=$(curl &amp;#39;http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01&amp;amp;resource=https%3A%2F%2Fmanagement.azure.com%2F&amp;#39; -H Metadata:true -s) access_token=$(echo $response | python -c &amp;#39;import sys, json; print (json.</description>
    </item>
    
    <item>
      <title>Azure: Copy a blob from a tenant to another tenant account</title>
      <link>https://hoangmnsd.github.io/posts/azure-copy-blob-from-a-tenant-to-another/</link>
      <pubDate>Sat, 02 Oct 2021 09:53:45 +0900</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/azure-copy-blob-from-a-tenant-to-another/</guid>
      <description>1. Giới thiệu Việc copy 1 file từ storage account này sang 1 storage acccount khác tenant không hẳn là khó khăn, nhưng cũng đòi hỏi 1 chút chú ý để tránh mất thời gian
2. Yêu cầu  Dùng WSL Download AzCopy tool, refer: https://docs.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-v10  3. Cách làm 3.1. Copy a file from a tenant to another Đầu tiên cần nắm được syntax:
Copy a single blob to another blob by using a SAS token.</description>
    </item>
    
    <item>
      <title>Azure: Create AKS Cluster by ARM and ACI (using CNAB, porter.sh)</title>
      <link>https://hoangmnsd.github.io/posts/azure-create-akscluster-using-arm-aci-cnab-porter/</link>
      <pubDate>Tue, 10 Aug 2021 15:03:08 +0900</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/azure-create-akscluster-using-arm-aci-cnab-porter/</guid>
      <description>Bạn muốn deploy Azure AKS Cluster bằng ARM và Azure Container Instance, sau đó deploy helm chart lên AKS cluster đó.
1. Giới Thiệu CNAB là gì? https://cnab.io/
CNAB là Cloud Native Application Bundle. Nó được thiết kế để bundling, installing, managing các distributed app.
Nó được design bởi MS, Docker, Bitami, Hashicorp, Pivotal, codefresh.
1 CNAB bao gồm 3 thành phần: Application Image, Invocation Image, Bundle descriptor.
Tác dụng mà CNAB đem lại: Package toàn bộ app của bạn, ko cần cấu trúc phức tạp,&amp;hellip;</description>
    </item>
    
    <item>
      <title>Azure: Setup Auto Stop/Start on schedule for Virtual Machines</title>
      <link>https://hoangmnsd.github.io/posts/encrypt-azure-setup-auto-stop-start-virtual-machines/</link>
      <pubDate>Mon, 31 Aug 2020 21:47:51 +0700</pubDate>
      
      <guid>https://hoangmnsd.github.io/posts/encrypt-azure-setup-auto-stop-start-virtual-machines/</guid>
      <description>Nên sử dụng Automation service của Azure
Giả sử bạn đã tạo 1 Resource Group tên là: test-auto-startstop-vm
Trong Resource Group đó bạn có 2 VM như sau (ảnh): Chọn Resource Group mà bạn muốn apply stop/start solution vào, chọn Add (ảnh):
Search Automation (ảnh):
Chọn Create (ảnh):
Tạo Automation Account. Điền thông tin phù hợp với bạn và tiếp tục chọn Create (ảnh):
Quay lại portal của Resource Group bạn sẽ thấy có thêm các resource được tạo ra.</description>
    </item>
    
  </channel>
</rss>
